diff -ubBENdr luacrypto-0.2.0.orig/Makefile luacrypto-0.2.0/Makefile
--- luacrypto-0.2.0.orig/Makefile	2006-08-25 07:24:17.000000000 +0400
+++ luacrypto-0.2.0/Makefile	2009-08-20 14:23:14.000000000 +0400
@@ -10,6 +10,8 @@
 OBJS= src/$T.o $(COMPAT_O)
 SRCS= src/$T.h src/$T.c
 
+all: lib
+
 lib: src/$(LIBNAME)
 
 src/$(LIBNAME): $(OBJS)
diff -ubBENdr luacrypto-0.2.0.orig/config luacrypto-0.2.0/config
--- luacrypto-0.2.0.orig/config	2006-08-25 07:24:17.000000000 +0400
+++ luacrypto-0.2.0/config	2009-08-20 14:01:43.000000000 +0400
@@ -1,8 +1,8 @@
 # Installation directories
 # System's libraries directory (where binary libraries are installed)
-LUA_LIBDIR= /usr/local/lib/lua/5.0
+LUA_LIBDIR= $(PREFIX)/lib/lua
 # Lua includes directory
-LUA_INC= /usr/local/include
+LUA_INC= $(PREFIX)/include
 
 # OS dependent
 LIB_OPTION= -shared #for Linux
@@ -13,11 +13,11 @@
 LIBNAME= $T.so.$V
 COMPAT_DIR= ../compat/src
 
-OPENSSL_LIBS= -L/usr/local/openssl/lib -lcrypto -lssl
-OPENSSL_INCS= -I/usr/local/openssl/include
+OPENSSL_LIBS= -L$(PREFIX)/local/openssl/lib -lcrypto -lssl
+OPENSSL_INCS= -I$(PREFIX)/local/openssl/include
 
 # Compilation directives
-WARN= -O2 -Wall -fPIC -W -Waggregate-return -Wcast-align -Wmissing-prototypes -Wnested-externs -Wshadow -Wwrite-strings
+WARN= -Os -Wall -fPIC -W -Waggregate-return -Wcast-align -Wmissing-prototypes -Wnested-externs -Wshadow -Wwrite-strings
 INCS= -I$(LUA_INC) -I$(COMPAT_DIR)
 CFLAGS= $(WARN) $(OPENSSL_INCS) $(INCS)
 CC= gcc
